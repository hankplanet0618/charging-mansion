<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®œè˜­ç¤æºªå……é›»èŠ - é è¨‚ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .zone-card { transition: all 0.3s ease; }
        .zone-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.15); }
        .selected { border: 2px solid #059669 !important; background-color: #F0FDF4; }
        .loading { opacity: 0.7; pointer-events: none; }
        .text-shadow { text-shadow: 2px 2px 4px rgba(0,0,0,0.7); }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 font-sans">

    <nav class="bg-stone-900 text-white p-4 shadow-lg sticky top-0 z-50 opacity-95">
        <div class="container mx-auto flex justify-between items-center max-w-6xl">
            <h1 class="text-xl font-bold flex items-center tracking-wider">
                <i class="fas fa-bolt text-yellow-400 mr-2"></i> å®œè˜­ç¤æºªå……é›»èŠ
            </h1>
            <div class="space-x-4">
                <a href="#bookingForm" class="hidden md:inline text-sm hover:text-green-400 transition">ç«‹å³é è¨‚</a>
                <a href="https://docs.google.com/spreadsheets/d/1frnxcFu6ZvYjUaSRpbq84ROjWYIY4mrHLDyjR1InyXg/edit?gid=0#gid=0" target="_blank" class="text-sm bg-yellow-500 text-stone-900 px-4 py-2 rounded font-bold hover:bg-yellow-400 transition">
                    <i class="fas fa-user-cog mr-1"></i> ç‡Ÿä¸»å¾Œå°
                </a>
            </div>
        </div>
    </nav>

    <div class="relative w-full group shadow-xl">
        <img src="https://i.ibb.co/6cx1xrVR/image.jpg" 
             class="w-full h-auto object-contain block">
        
        <div class="absolute inset-0 bg-gradient-to-t from-stone-900 via-transparent to-black opacity-50"></div>
        
        <div class="absolute inset-0 flex flex-col justify-center items-center text-white text-center p-4">
            <span class="bg-green-600 text-sm font-bold px-3 py-1 rounded-full mb-4 tracking-wide uppercase shadow-lg">Tesla Friendly Camping</span>
            <h2 class="text-3xl md:text-6xl font-bold mb-4 text-shadow tracking-tight">æ˜Ÿç©ºä¸‹çš„å……é›»èŠåœ’</h2>
            <p class="text-lg md:text-2xl font-light tracking-wider opacity-90 mb-8 text-shadow max-w-2xl">
                åœ¨å®œè˜­ç¤æºªï¼Œäº«å—æº«æ³‰é„‰èˆ‡ç´”æ·¨è‡ªç„¶çš„æ¥µè‡´éœ²ç‡Ÿé«”é©—
            </p>
            <a href="#bookingForm" class="bg-white text-green-800 font-bold py-3 px-10 rounded-full shadow-2xl hover:bg-green-50 transition transform hover:scale-110 flex items-center">
                <i class="fas fa-calendar-check mr-2"></i> é–‹å§‹é è¨‚æ—…ç¨‹
            </a>
        </div>
    </div>

    <div class="container mx-auto p-4 max-w-5xl -mt-10 relative z-10">
        
        <form id="bookingForm" class="space-y-8">
            
            <div class="bg-white rounded-2xl shadow-xl p-6 md:p-10 border-t-4 border-green-600">
                <div class="flex items-center mb-6 pb-4 border-b border-stone-100">
                    <div class="w-10 h-10 rounded-full bg-green-600 text-white flex items-center justify-center font-bold mr-4 text-lg">1</div>
                    <div><h3 class="text-2xl font-bold text-stone-800">é è¨‚è³‡è¨Š</h3><p class="text-sm text-stone-500">è«‹å¡«å¯«æ‚¨çš„è¯çµ¡æ–¹å¼èˆ‡æ—¥æœŸ</p></div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-bold text-stone-500 mb-2">è¨‚ä½å¤§å</label>
                        <input type="text" name="è¨‚ä½å¤§å" placeholder="è«‹è¼¸å…¥å§“å" required class="w-full bg-stone-50 border-stone-200 border rounded-xl p-4 focus:ring-2 focus:ring-green-500 outline-none transition">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-stone-500 mb-2">è¯çµ¡é›»è©±</label>
                        <input type="tel" name="è¯çµ¡é›»è©±" placeholder="09xx-xxx-xxx" required class="w-full bg-stone-50 border-stone-200 border rounded-xl p-4 focus:ring-2 focus:ring-green-500 outline-none transition">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-stone-500 mb-2">æ‚¨çš„ Line ID <span class="text-xs font-normal text-stone-400">(æ–¹ä¾¿ç‡Ÿä¸»èˆ‡æ‚¨è¯ç¹«)</span></label>
                        <input type="text" name="Line ID" placeholder="ä¾‹å¦‚ï¼š@tesla123 æˆ– æ‰‹æ©Ÿè™Ÿç¢¼æœå°‹" class="w-full bg-stone-50 border-stone-200 border rounded-xl p-4 focus:ring-2 focus:ring-green-500 outline-none transition">
                    </div>

                    <div class="bg-stone-50 p-4 rounded-xl md:col-span-2 border border-stone-200">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-bold text-stone-500 mb-2">å…¥ä½æ—¥æœŸ (Check-in)</label>
                                <input type="date" id="checkinDate" name="å…¥ä½æ—¥æœŸ" required class="w-full bg-white border-stone-300 border rounded-xl p-4 focus:ring-2 focus:ring-green-500 outline-none transition">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-stone-500 mb-2">é€€æˆ¿æ—¥æœŸ (Check-out)</label>
                                <input type="date" id="checkoutDate" name="é€€æˆ¿æ—¥æœŸ" required class="w-full bg-white border-stone-300 border rounded-xl p-4 focus:ring-2 focus:ring-green-500 outline-none transition">
                            </div>
                        </div>
                        <div class="mt-3 text-right">
                            <span class="text-sm text-stone-500">é è¨ˆä½å®¿ï¼š</span>
                            <span id="nightsDisplay" class="text-xl font-bold text-green-600">0</span>
                            <span class="text-sm text-stone-500">æ™š</span>
                            <input type="hidden" name="å…¥ä½å¤©æ•¸" id="nightsInput">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-stone-500 mb-2">é è¨‚æ•¸é‡</label>
                        <select name="é è¨‚æ•¸é‡" class="w-full bg-stone-50 border-stone-200 border rounded-xl p-4 bg-white focus:ring-2 focus:ring-green-500 outline-none transition">
                            <option value="1">1 å¸³ / é–“</option>
                            <option value="2">2 å¸³ / é–“</option>
                            <option value="3">3 å¸³ / é–“</option>
                            <option value="4">4 å¸³ / é–“</option>
                            <option value="5">5 å¸³ / é–“</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-xl p-6 md:p-10 border-t-4 border-green-600">
                <div class="flex items-center mb-6 pb-4 border-b border-stone-100">
                    <div class="w-10 h-10 rounded-full bg-green-600 text-white flex items-center justify-center font-bold mr-4 text-lg">2</div>
                    <div><h3 class="text-2xl font-bold text-stone-800">é¸æ“‡å€åŸŸ</h3><p class="text-sm text-stone-500">é»æ“Šå¡ç‰‡é¸æ“‡æ‚¨å–œæ­¡çš„ä½ç½®</p></div>
                </div>
                <input type="hidden" name="é è¨‚å€åŸŸ" id="selectedZoneInput" required>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="zoneContainer"></div>
            </div>

            <div class="bg-white rounded-2xl shadow-xl p-6 md:p-10 border-t-4 border-green-600">
                <div class="flex items-center mb-6 pb-4 border-b border-stone-100">
                    <div class="w-10 h-10 rounded-full bg-green-600 text-white flex items-center justify-center font-bold mr-4 text-lg">3</div>
                    <div><h3 class="text-2xl font-bold text-stone-800">ç‰¹æ®Šéœ€æ±‚</h3><p class="text-sm text-stone-500">æœ‰ä»»ä½•éœ€è¦æˆ‘å€‘å”åŠ©çš„åœ°æ–¹å—ï¼Ÿ</p></div>
                </div>
                <textarea name="å‚™è¨»éœ€æ±‚" placeholder="ä¾‹å¦‚ï¼šæˆ‘æ˜¯ç‰¹æ–¯æ‹‰è»Šä¸»éœ€è¦å……é›»ã€éœ€è¦ç§Ÿå€Ÿè£å‚™ã€å¤§ç´„å¹¾é»æŠµé”..." class="w-full bg-stone-50 border-stone-200 border rounded-xl p-4 h-32 focus:ring-2 focus:ring-green-500 outline-none transition"></textarea>
            </div>

            <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-xl shadow-md flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center">
                    <div class="text-5xl text-green-600 mr-4"><i class="fab fa-line"></i></div>
                    <div>
                        <h4 class="text-lg font-bold text-green-800">åŠ å…¥å®˜æ–¹ LINE@ ç¢ºèªè¨‚ä½</h4>
                        <p class="text-sm text-green-700">è«‹å‹™å¿…é»æ“Šå³å´æŒ‰éˆ•åŠ å…¥å¥½å‹ï¼Œä»¥æ¥æ”¶åŒ¯æ¬¾è³‡è¨Šã€‚</p>
                    </div>
                </div>
                <a href="https://lin.ee/lSvpZal" target="_blank" class="w-full md:w-auto bg-[#00C300] hover:bg-[#00b300] text-white font-bold py-3 px-6 rounded-xl shadow transition text-center flex items-center justify-center transform hover:scale-105">
                    <i class="fas fa-plus mr-2"></i> é»æˆ‘åŠ å…¥å®˜æ–¹å¸³è™Ÿ
                </a>
            </div>

            <button type="submit" id="submitBtn" class="w-full bg-gradient-to-r from-green-600 to-green-500 text-white font-bold py-5 rounded-2xl text-xl shadow-lg hover:shadow-xl hover:from-green-700 hover:to-green-600 transition duration-300 transform hover:-translate-y-1">
                ç¢ºèªé€å‡ºé è¨‚å–®
            </button>
        </form>
        
        <footer class="text-center mt-12 mb-8">
            <p class="text-stone-500 font-bold mb-2">
                <i class="fas fa-phone-alt mr-2 text-green-600"></i> ç‡Ÿä¸»å°ˆç·šï¼š0975-020-425
            </p>
            <p class="text-stone-400 text-sm">
                &copy; 2025 å®œè˜­ç¤æºªå……é›»èŠ. All rights reserved.
            </p>
        </footer>
    </div>

    <script>
        // =======================================================
        // æ‚¨çš„ Google Apps Script ç¶²å€
        // =======================================================
        const scriptURL = 'https://script.google.com/macros/s/AKfycbx50Gi-IznC_IXc9ZfKJKwBwr9hWpWqABpqGnF5yygakQ2D8WKc0nD0hJmpmtQjmC6L/exec'; 

        // ç‡Ÿä½åœ–ç‰‡è¨­å®š
        const zones = [
            { name: 'æ£šæ¶ A å€', count: 9, img: 'https://i.ibb.co/KjBcKGvt/A-DDcar.jpg', desc: 'å¯¬æ•é®é›¨æ£šï¼Œé©åˆæ–°æ‰‹ï¼Œå…±9å¸³' },
            { name: 'æ£šæ¶ B å€', count: 4, img: 'https://i.ibb.co/bMQ51htS/B.jpg', desc: 'ç¨ç«‹å°å€ï¼Œå®‰éœèˆ’é©ï¼Œå…±4å¸³' },
            { name: 'æ£šæ¶ C å€', count: 3, img: 'https://i.ibb.co/c70KNkJ/C1.jpg', desc: 'é›¢è¡›æµ´è¿‘ï¼Œæ–¹ä¾¿é¦–é¸ï¼Œå…±3å¸³' },
            { name: 'æ£§æ¿ A å€', count: 3, img: 'https://i.ibb.co/XrMggq46/1.jpg', desc: 'é«˜æ¶æ£§æ¿ï¼Œé˜²æ½®å¹³æ•´ï¼Œå…±3å¸³' },
            { name: 'æ£§æ¿ B å€', count: 2, img: 'https://i.ibb.co/JRmcf3bw/B.jpg', desc: 'æ¨¹è”­ä¸‹ï¼Œæ¶¼çˆ½é€šé¢¨ï¼Œå…±2å¸³' },
            { name: 'ä¸‰äººé ‚ç´šéœ²ç‡Ÿè»Š', count: 2, img: 'https://i.ibb.co/ns9mKpBq/image.jpg', desc: 'å†·æš–æ°£ä¿±å…¨ï¼Œå…æ­å¸³é«”é©—' },
            { name: 'å°æœ¨å±‹ (å¤§)', count: 1, img: 'https://i.ibb.co/4n2CPt5X/image.jpg', desc: 'å®¶åº­é¦–é¸ï¼Œå«ç¨ç«‹è¡›æµ´' },
            { name: 'å°æœ¨å±‹ (å°)', count: 1, img: 'https://i.ibb.co/CpNgsKHw/image.jpg', desc: 'æº«é¦¨é›™äººç©ºé–“' },
            { name: 'è‰åœ°å€', count: 5, img: 'https://i.ibb.co/S73TLHJR/2.jpg', desc: 'æŸ”è»Ÿè‰çš®ï¼Œè¦ªè¿‘è‡ªç„¶ï¼Œå…±5å¸³' },
            { name: 'ç¢çŸ³åœ°å€', count: 2, img: 'https://i.ibb.co/S73TLHJR/2.jpg', desc: 'æ’æ°´ä½³ï¼Œé©åˆè»Šé ‚å¸³ï¼Œå…±2å¸³' }, 
            { name: 'åŒ…æ£Ÿæ°‘å®¿ (16äºº)', count: 1, img: 'https://i.ibb.co/6RyZYPVy/7-KW.jpg', desc: 'å°ˆå±¬ç§å¯†ç©ºé–“ï¼ŒKTV/å»šæˆ¿' },
            // â†“â†“â†“ é€™è£¡å·²ç¶“å¹«æ‚¨ä¿®æ­£ä¹¾æ·¨äº† â†“â†“â†“
            { name: 'KZM T-250 å°ˆå€', count: 1, img: 'https://i.ibb.co/cS2sXGr9/tw-11134208-81ztg-meterwxf57gmfa.jpg', desc: 'å« KZM T-250 å……æ°£å¸³é«”é©—' }
        ];

        // æ—¥æœŸè¨ˆç®—é‚è¼¯
        const checkinInput = document.getElementById('checkinDate');
        const checkoutInput = document.getElementById('checkoutDate');
        const nightsDisplay = document.getElementById('nightsDisplay');
        const nightsInput = document.getElementById('nightsInput');

        function calculateNights() {
            if (checkinInput.value && checkoutInput.value) {
                const start = new Date(checkinInput.value);
                const end = new Date(checkoutInput.value);
                
                // è¨ˆç®—å·®ç•°æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
                const diffTime = end - start;
                // æ›ç®—æˆå¤©æ•¸
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 

                if (diffDays > 0) {
                    nightsDisplay.textContent = diffDays;
                    nightsInput.value = diffDays;
                } else {
                    nightsDisplay.textContent = 0;
                    nightsInput.value = 0;
                }
            }
        }

        checkinInput.addEventListener('change', calculateNights);
        checkoutInput.addEventListener('change', calculateNights);

        const container = document.getElementById('zoneContainer');
        const input = document.getElementById('selectedZoneInput');

        zones.forEach(zone => {
            const div = document.createElement('div');
            div.className = 'zone-card border border-stone-200 rounded-xl p-0 cursor-pointer bg-white flex overflow-hidden h-28 relative';
            div.innerHTML = `
                <div class="w-32 h-full flex-shrink-0 bg-stone-200">
                    <img src="${zone.img}" class="w-full h-full object-cover">
                </div>
                <div class="flex-grow p-3 flex flex-col justify-center">
                    <div class="flex justify-between items-start">
                        <h4 class="font-bold text-lg text-stone-800 leading-tight">${zone.name}</h4>
                        ${zone.name.includes('è»Š') || zone.name.includes('å±‹') ? '<span class="bg-yellow-100 text-yellow-800 text-[10px] px-2 py-0.5 rounded-full font-bold">ç†±é–€</span>' : ''}
                    </div>
                    <p class="text-xs text-stone-500 mt-1 line-clamp-2">${zone.desc}</p>
                    <p class="text-xs text-green-600 font-bold mt-auto pt-1"><i class="fas fa-check-circle"></i> å°šæœ‰ç©ºä½</p>
                </div>
                <div class="hidden check-icon absolute top-2 right-2 bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs shadow-lg"><i class="fas fa-check"></i></div>
            `;
            div.onclick = () => {
                document.querySelectorAll('.zone-card').forEach(c => {
                    c.classList.remove('selected');
                    c.querySelector('.check-icon').classList.add('hidden');
                });
                div.classList.add('selected');
                div.querySelector('.check-icon').classList.remove('hidden');
                input.value = zone.name;
            };
            container.appendChild(div);
        });

        const form = document.getElementById('bookingForm');
        const btn = document.getElementById('submitBtn');

        form.addEventListener('submit', e => {
            e.preventDefault();
            
            if (scriptURL.includes('YOUR_GOOGLE_SCRIPT_URL')) {
                alert('âš ï¸ ç³»çµ±éŒ¯èª¤ï¼šè«‹ç‡Ÿä¸»æª¢æŸ¥ç¨‹å¼ç¢¼ï¼Œå°šæœªæ›´æ› Google Script ç¶²å€ï¼');
                return;
            }

            if(!input.value) {
                alert('è«‹é¸æ“‡ä¸€å€‹ç‡Ÿä½å€åŸŸï¼');
                document.getElementById('zoneContainer').scrollIntoView({behavior: 'smooth'});
                return;
            }

            // æª¢æŸ¥å¤©æ•¸
            if (!nightsInput.value || nightsInput.value <= 0) {
                alert('è«‹æª¢æŸ¥å…¥ä½èˆ‡é€€æˆ¿æ—¥æœŸï¼Œå¤©æ•¸å¿…é ˆå¤§æ–¼ 0');
                return;
            }

            const originalBtnText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin mr-2"></i> è¨‚å–®å‚³é€ä¸­...';
            document.body.classList.add('loading');

            fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => {
                    alert('ğŸ‰ é è¨‚æˆåŠŸï¼\n\nç³»çµ±å·²æ”¶åˆ°æ‚¨çš„é ç´„ã€‚\nè«‹è¨˜å¾—åŠ å…¥å®˜æ–¹ LINE@ ç¢ºèªåŒ¯æ¬¾è³‡è¨Šã€‚');
                    form.reset();
                    // é‡ç½®å¤©æ•¸é¡¯ç¤º
                    document.getElementById('nightsDisplay').textContent = '0';
                    document.getElementById('nightsInput').value = '0';
                    
                    document.querySelectorAll('.zone-card').forEach(c => {
                        c.classList.remove('selected');
                        c.querySelector('.check-icon').classList.add('hidden');
                    });
                    input.value = '';
                    btn.disabled = false;
                    btn.innerHTML = originalBtnText;
                    document.body.classList.remove('loading');
                    window.scrollTo({top: 0, behavior: 'smooth'});
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    alert('âš ï¸ ç³»çµ±å¿™ç·šä¸­ï¼Œè«‹ç¨å¾Œå†è©¦ï¼Œæˆ–ç›´æ¥æ’¥æ‰“ç‡Ÿä¸»é›»è©±ï¼š0975-020-425');
                    btn.disabled = false;
                    btn.innerHTML = originalBtnText;
                    document.body.classList.remove('loading');
                });
        });
    </script>
</body>
</html>